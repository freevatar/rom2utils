


toMySQL_SIMPLE

изменения: другая библиотека, а именно DBD-mysql-SimpleMySQL
	добавлена переменная $port при коннекте (хотя вроде и без нее работает, но в руководстве по библиотеке говорится использовать его /port смотрится при конфигурировании БД, в примере был 3307 у меня 3306/)
	$host - теперь localhost - не воспринимает и надо его указать по IP (127.0.0.1)
а так вроде всё по старому
названия скриптов

Cr_Log_Simple.pl  <=>  Create_LogString1.pl
toMySQL_simple.pl <=> toMySQL.pl
TOP20_simple.pl <=> TOP20.pl


изменения - в таблицы ТОП20 по кол-ву матных сообщений и отношению (матные соощения/ко всем сообщения) {далее просто отношение !!!} добавлены поля по которым происходило формирование ТОП20, т.е. кол-во матных сообщений и отношение, соответственно


Структура, а так же как всё работает и как все использовать (одинаково, что для того что посылалось раньше, что для toMySQL1)
есть 3 управляющих файла
	Create_LogString1.pl
	toMySQL.pl
	TOP20.pl

Create_LogString1.pl
	этот файл подрузамевается запускать только  раз, он формирует на стороне СУБД (MySQL) необходимые таблицы,
хранимые процедуры, саму БД.
Для обеспечения корректной работы, необходимо указать:
	$login = 'root'; //root - это админский логин. создается автоматически при инсталяции MySQL, подходит любой логин, который, может добавлять, удалять ьтаблицы, БД, ХП (хранимые процедуры).
	$pass = '1'; //мной при установки был выбран пароль "1", тут необходимо указать пароль, если пароль не вводили при устаноыки, поле остаить пустым, но полную корректность работы в этом случае не гарантирую (у меня MySQL без пароля нормально не зажил, поэтому проверить возиможности не было)
	$host = 'localhost'; //если MySQL находится на той же машине, с котоой запускаются скрипыт, то localhost, иначе IP где MySQL
	$database = 'test'; //по умолчанию при инсталяции MySQL создается БД "test" вот к ней мы и пытаемся присоединится с логином и паролем (тут указывается любая существующая БД на сервере, это необходимо для корректного подключения)
	$PromezhVuch = 1; // если этот параметр = 1, то при каждом добавлении в БД происходит вычисление отношения, иначе 
это будет происходить только при вычислении ТОП20

этот скрипт выполяняет следующии действия:
	подсоединяется к MySQL , к БД test
	регистрирует, если её нет БД "allods"
	выбирает БД "allods"
	создает таблицу "reitingmat" (если её нет) с полями
		login - логин (50 знаков строчка)
		SoobAll - количество всех сообщений с данного логина
		SoobMat - количество матных сообщений с логина
		Otnosh - отношение
		Ochki - количество очков за мат
	создает таблицу "TOP20_MS" (если её нет), с полями
		login - логин
		matsoob - количество матных сообщений с логина
	
	создает таблицу "TOP20_OT" (если её нет), с полями
		login - логин
		otnosh - отношение
	создает ХП "InsertDATA" (ХП создается в любом случае, т.е. она всегда перезаписывается, если собираются менять 
структуру таблиц необходимоудалять их ручками)
=====================================================================================================
toMySQL.pl
	параметры
	$login
	$pass
	$host
		всё аналогично предыдущему скрипту
	$database = 'allods' - должно соответствовать БД создаваемой в предыдущем скрипте

	$MIN_LEN_SOOB = 4; минимальная длина нематного сообщений для учета
	$MIN_KOLVO_SOOB = 10; граничное количество сообьщений с которонр происхдит различное начисление очков
	$MIN_GRAN = 50; когда сообщений меньше $MIN_KOLVO_SOOB граничная точка для начисления/не начисления очков
	$BALL_DO_10 = 1; количество баллов начисляемых если количество сообщений меньше $MIN_KOLVO_SOOB
	@arrayboard = (-1,15,25,100); массив границ, когда сообщений больше $MIN_KOLVO_SOOB
		всегда первое значение -1, последнее 100,
		сейчас 3 зоны
			0 - 15 %
			15% - 25%
			25%- 100% 
	@arrayball = (-1,0,1); массив начисляемых баллов, количество значений в массиве на 1 меньше чем @arrayboard
		баллы соответсвенно начисляемые в каждой зоне
	скрипт заносит данные в БД с помощью ХП, вычисляет очки, колво сообщений всех, матных
=====================================================================================================
TOP20.pl
	параметры
	$login
	$pass
	$host
	$database
		так же как в toMySQL.pl
скрипт вычислет отношение для всё таблицы reitingmat
вычисляет ТОП20 по количеству матных слов и заносит в таблицу (перед этим очищая эту таблицу)  TOP20_MS
вычисляет ТОП20 по отношению и заносит в таблицу (перед этим очищая эту таблицу)  TOP20_OT
обнуляет поля SoobAll, SoobMat для таблицы reitingmat
